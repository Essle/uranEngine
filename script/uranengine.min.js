/*

	uranEngine 
	Текущая версия: 1.7.2
	_______________________________

	uranengine.ru
	github.com/Essle/uranEngine

*/

function _object(e){this.name=e;this.id=(new Date).getTime();this.data={polygons:{points:[],size:{height:0,width:0},collision:[]},collision:[],offset:{left:0,right:0,top:0,bottom:0},animate:{sprite:null,infinity:false,animated:false,getFrame:1,pause:5,update:0,frames:0},angle:0,sprite:null,mouse:false};this.property={fasten:false,sprite:null,health:100,collision:false,velocity:{x:2,y:2},polygons:[],position:{x:0,y:0},angle:0,size:{height:0,width:0},data:[]};OBJECTS.push(this)}function __isObjectCollision(e,t){var n=false;for(var r in OBJECTS){if(e==OBJECTS[r]){continue}if(__isObjectInObject(t,e,OBJECTS[r])){if(OBJECTS[r].property.collision){n=true}if(!e.data.collision[OBJECTS[r].id]){e.data.collision[OBJECTS[r].id]=true;if(!OBJECTS[r].property.collision){EVENTS["onEnter"].run(e,{object:OBJECTS[r]})}if(e.has()&&OBJECTS[r].has()){EVENTS["onCollision"].run(e,{object:OBJECTS[r]})}}}else{if(e.data.collision[OBJECTS[r].id]){delete e.data.collision[OBJECTS[r].id];if(!OBJECTS[r].property.collision){EVENTS["onLeave"].run(e,{object:OBJECTS[r]})}}}if(!e.has()){return true}}return n}function __isObjectInObject(e,t,n){var r=__getObjectPositionOffset(t,e);if(r.left>n.data.offset.right||r.right<n.data.offset.left||r.top>n.data.offset.bottom||r.bottom<n.data.offset.top){return false}for(var i=0;i<t.data.polygons.points.length-1;++i){var s=[r.left+t.data.polygons.points[i][0],r.top+t.data.polygons.points[i][1]],o=[r.left+t.data.polygons.points[i+1][0],r.top+t.data.polygons.points[i+1][1]];for(var u=0;u<n.data.polygons.points.length-1;++u){var a=[n.data.offset.left+n.data.polygons.points[u][0],n.data.offset.top+n.data.polygons.points[u][1]],f=[n.data.offset.left+n.data.polygons.points[u+1][0],n.data.offset.top+n.data.polygons.points[u+1][1]];if((a[1]-f[1])*s[0]+(f[0]-a[0])*s[1]+(a[0]*f[1]-f[0]*a[1])===0||(a[1]-f[1])*o[0]+(f[0]-a[0])*o[1]+(a[0]*f[1]-f[0]*a[1])===0||((f[0]-a[0])*(s[1]-a[1])-(f[1]-a[1])*(s[0]-a[0]))*((f[0]-a[0])*(o[1]-a[1])-(f[1]-a[1])*(o[0]-a[0]))<0&&((o[0]-s[0])*(a[1]-s[1])-(o[1]-s[1])*(a[0]-s[0]))*((o[0]-s[0])*(f[1]-s[1])-(o[1]-s[1])*(f[0]-s[0]))<0){if(t.data.polygons.collision[n.id]!=u){t.data.polygons.collision[n.id]=u;EVENTS["onPolygon"].run(t,{object:n,polygon:u})}return true}}if(n.isLocated(r.left+t.data.polygons.points[i][0],r.top+t.data.polygons.points[i][1])){return true}}return false}function __getObjectPositionOffset(e,t){return{left:t.x-e.property.size.width/2,right:t.x+e.property.size.width/2,top:t.y-e.property.size.height/2,bottom:t.y+e.property.size.height/2}}function __updateOffset(e){e.data.offset={left:e.property.position.x-e.property.size.width/2,right:e.property.position.x+e.property.size.width/2,top:e.property.position.y-e.property.size.height/2,bottom:e.property.position.y+e.property.size.height/2}}function __updatePolygons(e){var t=[e.data.polygons.size.width/e.property.size.width,e.data.polygons.size.height/e.property.size.height];var n=[e.property.size.width/2,e.property.size.height/2];var r=Math.sin(e.data.angle),i=Math.cos(e.data.angle);var s=[];for(var o in e.property.polygons){s=[e.property.polygons[o][0]/t[0]-n[0],e.property.polygons[o][1]/t[1]-n[1]];e.data.polygons.points[o]=[n[0]+(s[0]*i-s[1]*r)<<0,n[1]+(s[0]*r+s[1]*i)<<0]}e.data.polygons.points[e.property.polygons.length]=e.data.polygons.points[0]}function createWorld(e,t,n){window.onload=function(){WORLD.element=document.getElementById(e);if(!WORLD.element){console.error("Canvas с id `"+e+"` не найден");return}WORLD.canvas=WORLD.element.getContext("2d");WORLD.element.width=t[0];WORLD.element.height=t[1];WORLD.canvas.textBaseline="hanging";WORLD.canvas.lineWidth=2;WORLD.canvas.strokeStyle="#ff0000";__bindController();(function r(){__renderFrames(r);__updateWorld()})();n()}}function createObject(e,t){if(typeof e=="object"){t=e;e="Undefined"}var n=new _object(e);if(t){n.set(t)}return n}function selectObjects(e){var t=[];for(var n in OBJECTS){if(OBJECTS[n].name==e||typeof e=="undefined"){t.push(OBJECTS[n])}}return t}function createHud(e){var t=new _hud;if(e){t.set(e)}return t}function cacheSprites(e,t){if(!t){t=e;e="data/sprites/"}else{e+="/"}for(var n in t){WORLD.sprites[t[n]]=new Image;WORLD.sprites[t[n]].src=e+t[n];WORLD.sprites[t[n]].onerror=function(){delete WORLD.sprites[t[n]]}}}function cacheSounds(e,t){if(!t){t=e;e="data/sounds/"}else{e+="/"}for(var n in t){WORLD.sounds[t[n]]=new Audio;WORLD.sounds[t[n]].src=e+t[n];WORLD.sounds[t[n]].onerror=function(){delete WORLD.sounds[t[n]]}}}function playSound(e){if(!WORLD.sounds[e]){console.warn("Звук "+e+" не найден в кэше игры");return}WORLD.sounds[e].load();WORLD.sounds[e].play()}function setCursor(e){WORLD.element.style.cursor=e}function drawMap(e){if(!WORLD.sprites[e]){console.warn("Спрайт "+e+" не найден в кэше игры");return}WORLD.map={sprite:WORLD.sprites[e],position:[[0,0]]};WORLD.map.update=function(){for(var e=0;e<2;++e){var t=WORLD.element.width-WORLD.map.position[e][0]>WORLD.element.width?WORLD.element.width:WORLD.element.width-WORLD.map.position[e][0],n=WORLD.element.height-WORLD.map.position[e][1]>WORLD.element.height?WORLD.element.height:WORLD.element.height-WORLD.map.position[e][1];if(WORLD.map.position[e]){WORLD.canvas.drawImage(WORLD.map.sprite,0,0,t,n,WORLD.map.position[e][0],WORLD.map.position[e][1],t,n)}}}}function moveMap(e,t){if(!WORLD.map){return}if(!WORLD.map.position[1]){if(e==180){WORLD.map.position[1]=[WORLD.element.width,0]}else if(e===0){WORLD.map.position[1]=[-WORLD.element.width,0]}else if(e==90){WORLD.map.position[1]=[0,WORLD.element.height]}else if(e==270){WORLD.map.position[1]=[0,-WORLD.element.height]}else{console.warn("");return}}var n=t*Math.cos(e*-CONST.RAD)<<0,r=t*Math.sin(e*-CONST.RAD)<<0;var i;for(i=0;i<2;++i){WORLD.map.position[i][0]+=n;WORLD.map.position[i][1]+=r}for(i=0;i<2;++i){if(WORLD.map.position[i][0]+WORLD.element.width<=0){WORLD.map.position[i][0]=WORLD.element.width}else if(WORLD.map.position[i][0]>=WORLD.element.width){WORLD.map.position[i][0]=-WORLD.element.width}if(WORLD.map.position[i][1]+WORLD.element.height<=0){WORLD.map.position[i][1]=WORLD.element.height}else if(WORLD.map.position[i][1]>=WORLD.element.height){WORLD.map.position[i][1]=-WORLD.element.height}}}function __updateWorld(){WORLD.canvas.clearRect(0,0,WORLD.element.width,WORLD.element.height);if(WORLD.map){WORLD.map.update()}WORLD.canvas.beginPath();var e;for(e in OBJECTS){EVENTS["onUpdate"].run(OBJECTS[e],{object:OBJECTS[e]})}for(e in OBJECTS){if(!OBJECTS[e].isVisible()||OBJECTS[e].property.size.width===0||OBJECTS[e].property.size.height===0){continue}WORLD.canvas.translate(OBJECTS[e].property.position.x,OBJECTS[e].property.position.y);WORLD.canvas.rotate(OBJECTS[e].data.angle);if(OBJECTS[e].data.animate.animated){WORLD.canvas.drawImage(OBJECTS[e].data.animate.sprite,OBJECTS[e].property.size.width*(OBJECTS[e].data.animate.getFrame-1),0,OBJECTS[e].data.animate.sprite.width/OBJECTS[e].data.animate.frames,OBJECTS[e].data.animate.sprite.height,-OBJECTS[e].property.size.width/2,-OBJECTS[e].property.size.height/2,OBJECTS[e].property.size.width,OBJECTS[e].property.size.height);OBJECTS[e].data.animate.update++;if(OBJECTS[e].data.animate.update==OBJECTS[e].data.animate.pause){if(OBJECTS[e].data.animate.getFrame==OBJECTS[e].data.animate.frames){if(OBJECTS[e].data.animate.infinity){OBJECTS[e].data.animate.getFrame=1}}else{OBJECTS[e].data.animate.getFrame++}OBJECTS[e].data.animate.update=0}}else if(OBJECTS[e].data.sprite){WORLD.canvas.drawImage(OBJECTS[e].data.sprite,-OBJECTS[e].property.size.width/2,-OBJECTS[e].property.size.height/2,OBJECTS[e].property.size.width,OBJECTS[e].property.size.height)}WORLD.canvas.rotate(-OBJECTS[e].data.angle);WORLD.canvas.translate(-OBJECTS[e].property.position.x,-OBJECTS[e].property.position.y);if(OBJECTS[e].data.polygons.points.length>2&&CONST.DEBUG){for(var t=0;t<OBJECTS[e].data.polygons.points.length-1;++t){WORLD.canvas.moveTo(OBJECTS[e].data.offset.left+OBJECTS[e].data.polygons.points[t][0],OBJECTS[e].data.offset.top+OBJECTS[e].data.polygons.points[t][1]);WORLD.canvas.lineTo(OBJECTS[e].data.offset.left+OBJECTS[e].data.polygons.points[t+1][0],OBJECTS[e].data.offset.top+OBJECTS[e].data.polygons.points[t+1][1])}}}WORLD.canvas.stroke();for(e in HUD){if(!HUD[e].property.text||!HUD[e].property.toggle){continue}if(HUD[e].property.background){WORLD.canvas.fillStyle=HUD[e].property.background;WORLD.canvas.fillRect(HUD[e].data.position.x,HUD[e].data.position.y,HUD[e].data.size.width,HUD[e].data.size.height)}if(HUD[e].data.sprite){WORLD.canvas.drawImage(HUD[e].data.sprite,HUD[e].data.position.x,HUD[e].data.position.y,HUD[e].data.size.width,HUD[e].data.size.height)}WORLD.canvas.textAlign=HUD[e].property.align;WORLD.canvas.font=HUD[e].property.textStyle+" "+HUD[e].property.textSize+"px "+HUD[e].property.textFont;WORLD.canvas.fillStyle=HUD[e].property.textColor;WORLD.canvas.fillText(HUD[e].property.text,HUD[e].property.position.x+HUD[e].data.offsetText.x,HUD[e].property.position.y+HUD[e].data.offsetText.y)}for(e in keyHas){EVENTS["onKeyHas"].run(e)}EVENTS["onWorldUpdate"].run()}function _event(e){if(EVENTS[e]){return}this.key=e;this.callback=[];this.target=[];this.save={params:[],target:[]};EVENTS[e]=this;window[e]=function(t,n){EVENTS[e].init(t,n)}}function _hud(e){this.id=(new Date).getTime();this.data={mouse:false,position:{x:0,y:0},size:{width:0,height:0},sprite:null,offsetText:{x:0,y:0}};this.property={text:null,textColor:"#fff",textSize:14,textFont:"Arial",textStyle:"",textPadding:[0,0,0,0],sprite:null,toggle:true,align:"left",background:null,position:{x:0,y:0},size:{width:"auto",height:"auto"}};HUD.push(this)}function __updateHudSize(e,t){if(typeof t.width=="number"){e.data.size.width=clone(t.width)+e.property.textPadding[3]+e.property.textPadding[1]}else if(t.width=="auto"){WORLD.canvas.font=e.property.textStyle+" "+e.property.textSize+"px "+e.property.textFont;e.data.size.width=WORLD.canvas.measureText(e.property.text).width+e.property.textPadding[3]+e.property.textPadding[1]}if(typeof t.height=="number"){e.data.size.height=clone(t.height)+e.property.textPadding[0]+e.property.textPadding[2]}else if(t.height=="auto"){e.data.size.height=e.property.textSize*CONST.FONTHEIGHT+e.property.textPadding[0]+e.property.textPadding[2]}}function __updateHudPosition(e){var t=0,n;switch(e.property.align){case"left":t=e.property.position.x;n=e.property.textPadding[3];break;case"center":t=e.property.position.x-e.data.size.width/2;n=0;break;case"right":t=e.property.position.x-e.data.size.width;n=-e.property.textPadding[3];break}e.data.position={x:t,y:e.property.position.y};e.data.offsetText={x:n,y:e.property.textPadding[0]}}function __bindController(){document.addEventListener("keydown",function(e){if(!__isGameKey(e.keyCode)||keyHas[e.keyCode]){return}keyHas[e.keyCode]=true;EVENTS["onKeyDown"].run(e.keyCode)});document.addEventListener("keyup",function(e){if(!__isGameKey(e.keyCode)||!keyHas[e.keyCode]){return}delete keyHas[e.keyCode];EVENTS["onKeyUp"].run(e.keyCode)});WORLD.element.addEventListener("mousemove",function(e){var t={x:e.pageX-WORLD.element.offsetLeft,y:e.pageY-WORLD.element.offsetTop};EVENTS["onMouseMove"].run({position:t});for(i in OBJECTS){if(OBJECTS[i].isLocated(e.pageX,e.pageY)){if(!OBJECTS[i].data.mouse){OBJECTS[i].data.mouse=true;EVENTS["onMouseEnter"].run(OBJECTS[i],{position:t})}}else if(OBJECTS[i].data.mouse){OBJECTS[i].data.mouse=false;EVENTS["onMouseLeave"].run(OBJECTS[i],{position:t})}}for(i in HUD){if(HUD[i].isLocated(e.pageX,e.pageY)){if(!HUD[i].data.mouse){HUD[i].data.mouse=true;EVENTS["onHudMouseEnter"].run(HUD[i],{position:t})}}else if(HUD[i].data.mouse){HUD[i].data.mouse=false;EVENTS["onHudMouseLeave"].run(HUD[i],{position:t})}}});WORLD.element.addEventListener("click",function(e){var t={x:e.pageX-WORLD.element.offsetLeft,y:e.pageY-WORLD.element.offsetTop};EVENTS["onMouseClicked"].run({position:t});var n;for(n in OBJECTS){if(OBJECTS[n].isLocated(e.pageX,e.pageY)){EVENTS["onClicked"].run(OBJECTS[n],{position:t})}}for(n in HUD){if(HUD[n].isLocated(e.pageX,e.pageY)){EVENTS["onHudClicked"].run(HUD[n],{position:t})}}})}function __isGameKey(e){for(var t in KEYS){if(typeof KEYS[t]=="number"){if(e==KEYS[t]){return true}}else{for(var n in KEYS[t]){if(e==KEYS[t][n]){return true}}}}return false}function random(e,t,n){var r=e-.5+Math.random()*(t-e+1);return n?r:Math.round(r)}function vectorLength(e,t){return Math.sqrt(Math.pow((t.x||t[0])-(e.x||e[0]),2)+Math.pow((t.y||t[1])-(e.y||e[1]),2))}function anglePoint(e,t,n,r){var i=Math.atan2(t-r,n-e)*CONST.DEG;return i<0?i+360:i}function clone(e){if(typeof e!="object"){return e}var t=new e.constructor;for(var n in e){t[n]=typeof e[n]=="object"?clone(e[n]):e[n]}return t}var CONST={FRAMES:60,RAD:Math.PI/180,DEG:180/Math.PI,FONTHEIGHT:.8,DEBUG:false};var OBJECTS=[];_object.prototype={destroy:function(){if(!this.has()){return}OBJECTS.splice(OBJECTS.indexOf(this),1);delete this.property;delete this.data},has:function(){for(var e in OBJECTS){if(OBJECTS[e]==this){return true}}return false},set:function(e){if(!this.has()){return undefined}if(typeof e.size=="object"){this.property.size={width:typeof e.size.width=="number"?e.size.width<<0:this.property.size.width,height:typeof e.size.height=="number"?e.size.height<<0:this.property.size.height};__updateOffset(this);if(!this.property.polygons.length){this.data.polygons.size=this.property.size;this.property.polygons=[[0,0],[this.property.size.width,0],[this.property.size.width,this.property.size.height],[0,this.property.size.height]];this.data.polygons.points=clone(this.property.polygons);this.data.polygons.points[this.property.polygons.length]=this.data.polygons.points[0]}else{__updatePolygons(this)}}if(typeof e.polygons=="object"){if(e.polygons.length<3){console.warn("Количество полигонов не может быть меньше трех")}else{this.data.polygons.size={width:0,height:0};for(var t in e.polygons){this.data.polygons.size={width:this.data.polygons.size.width<e.polygons[t][0]?e.polygons[t][0]:this.data.polygons.size.width,height:this.data.polygons.size.height<e.polygons[t][1]?e.polygons[t][1]:this.data.polygons.size.height}}this.property.polygons=clone(e.polygons);this.data.polygons.points=clone(e.polygons);this.data.polygons.points[this.property.polygons.length]=this.data.polygons.points[0];if(this.property.size.width===0&&this.property.size.height===0){this.property.size=this.data.polygons.size;__updateOffset(this)}__updatePolygons(this)}}if(typeof e.angle=="number"){if(e.angle>360){e.angle-=360}else if(e.angle<-360){e.angle+=360}this.data.angle=(this.property.angle=e.angle)*-CONST.RAD;__updatePolygons(this)}if(typeof e.sprite=="string"){if(!WORLD.sprites[e.sprite]){console.warn("Спрайт "+e.sprite+" не найден в кэше игры")}else{this.property.sprite=e.sprite;this.data.sprite=WORLD.sprites[e.sprite];this.data.animate.animated=false}}if(typeof e.collision=="boolean"){this.property.collision=e.collision}if(typeof e.fasten=="boolean"){this.property.fasten=e.fasten}if(typeof e.health=="number"){var n=this.property.health;this.property.health=e.health;if(this.property.health<=0){this.property.health=0;if(n>0){EVENTS["onDeath"].run(this)}}}if(typeof e.velocity=="object"){this.property.velocity={x:typeof e.velocity.x=="number"?e.velocity.x:this.property.velocity.x,y:typeof e.velocity.y=="number"?e.velocity.y:this.property.velocity.y}}else if(typeof e.velocity=="number"){this.property.velocity={x:e.velocity,y:e.velocity}}if(typeof e.position=="object"){this.property.position={x:typeof e.position.x=="number"?e.position.x<<0:this.property.position.x,y:typeof e.position.y=="number"?e.position.y<<0:this.property.position.y};__updateOffset(this)}return this},get:function(e){return clone(this.property[e])},clone:function(){return(new _object(this.name)).set(this.property)},isVisible:function(){if(!this.has()){return false}return!(this.data.offset.right<0||this.data.offset.left>WORLD.element.width||this.data.offset.bottom<0||this.data.offset.top>WORLD.element.height)},giveDamage:function(e,t){if(!this.has()){return undefined}if(this.property.health>0){if(!t){t=e;e=null}this.property.health-=t;if(this.property.health<=0){this.property.health=0;EVENTS["onDeath"].run(this,{object:e})}}return this},setData:function(e,t){if(!this.has()){return undefined}if(typeof t=="undefined"){delete this.property.data[e]}else{this.property.data[e]=t}return this},getData:function(e){if(!this.has()){return undefined}return this.property.data[e]},animate:function(e,t,n,r){if(!WORLD.sprites[e]){console.warn("Спрайт "+e+" не найден в кэше игры")}else{this.data.animate={sprite:WORLD.sprites[e],infinity:typeof n=="boolean"?n:r,animated:true,getFrame:1,pause:typeof n=="number"?n:this.data.animate.pause,update:0,frames:t}}return this},move:function(e){if(!this.has()){return undefined}var t={x:this.property.position.x+this.property.velocity.x*Math.cos(e*-CONST.RAD)<<0,y:this.property.position.y+this.property.velocity.y*Math.sin(e*-CONST.RAD)<<0};if(this.property.fasten){var n=__getObjectPositionOffset(this,t);for(var r in this.data.polygons.points){if(n.left+this.data.polygons.points[r][0]<0||n.left+this.data.polygons.points[r][0]>WORLD.element.width||n.top+this.data.polygons.points[r][1]<0||n.top+this.data.polygons.points[r][1]>WORLD.element.height){return this}}}if(__isObjectCollision(this,t)){return this}if(!this.has()){return undefined}this.set({position:t});EVENTS["onMove"].run(this,{position:t});return this},moveTo:function(e,t){if(!this.has()){return undefined}this.move(anglePoint(this.property.position.x,this.property.position.y,e,t));return this},isLocated:function(e,t){var n=false,r=[],i=[];for(var s=0,o=this.data.polygons.points.length-1;s<this.data.polygons.points.length;o=s++){r=[this.data.offset.left+this.data.polygons.points[s][0],this.data.offset.left+this.data.polygons.points[o][0]];i=[this.data.offset.top+this.data.polygons.points[s][1],this.data.offset.top+this.data.polygons.points[o][1]];if(i[0]>t!=i[1]>t&&e<(r[1]-r[0])*(t-i[0])/(i[1]-i[0])+r[0]){n=!n}}return n}};var WORLD={canvas:null,element:null,sounds:[],sprites:[],map:null};var EVENT_LIST=["onMove","onCollision","onDeath","onEnter","onLeave","onMouseEnter","onMouseLeave","onClicked","onUpdate","onPolygon","onWorldUpdate","onKeyHas","onKeyDown","onKeyUp","onMouseClicked","onMouseMove","onHudMouseEnter","onHudMouseLeave","onHudClicked"];var EVENTS=[];_event.prototype={init:function(e,t){if(!t){t=e;e=null}this.callback.push(t);this.target.push(e);for(var n in this.save.target){this.run(this.save.target[n],this.save.params[n]);delete this.save.target[n];delete this.save.params[n]}},run:function(e,t){if(!this.callback.length){this.save.params.push(t);this.save.target.push(e);return}var n;if(!t){for(n in this.callback){this.callback[n](e)}}else{for(n in this.callback){if(this.target[n]===e||this.target[n]===e.name||!this.target[n]){this.callback[n].apply(e,[t])}}}}};for(var i in EVENT_LIST){new _event(EVENT_LIST[i])}var HUD=[];_hud.prototype={destroy:function(){HUD.splice(HUD.indexOf(this),1);delete this.data;delete this.property},set:function(e){if(typeof e.text=="string"){this.property.text=e.text}if(typeof e.textColor=="string"){this.property.textColor=e.textColor}if(typeof e.textSize=="number"){this.property.textSize=e.textSize}if(typeof e.textFont=="string"){this.property.textFont=e.textFont}if(typeof e.textStyle=="string"){this.property.textStyle=e.textStyle}if(typeof e.toggle=="boolean"){this.property.toggle=e.toggle}if(typeof e.background=="string"){this.property.background=e.background}if(typeof e.sprite=="string"){if(!WORLD.sprites[e.sprite]){console.warn("Спрайт "+e.sprite+" не найден в кэше игры")}else{this.property.sprite=e.sprite;this.data.sprite=WORLD.sprites[e.sprite]}}if(typeof e.textPadding=="object"){if(e.textPadding.length!=4){console.warn("Неверный формат отступов текста")}else{this.property.textPadding=e.textPadding}}if(typeof e.align=="string"){if(e.align!="left"&&e.align!="center"&&e.align!="right"){console.warn("Неверный тип позиционирования HUD")}else{this.property.align=e.align}}if(typeof e.position=="object"){this.property.position={x:typeof e.position.x=="number"?e.position.x<<0:this.property.position.x,y:typeof e.position.y=="number"?e.position.y<<0:this.property.position.y}}if(typeof e.size=="object"){this.property.size={width:typeof e.size.width=="number"?e.size.width<<0:e.size.width=="auto"?"auto":this.property.size.width,height:typeof e.size.height=="number"?e.size.height<<0:e.size.height=="auto"?"auto":this.property.size.height}}__updateHudSize(this,this.property.size);__updateHudPosition(this);return this},get:function(e){return clone(this.property[e])},isLocated:function(e,t){return e>this.data.position.x&&e<this.data.position.x+this.data.size.width&&t>this.data.position.y&&t<this.data.position.y+this.data.size.height}};var KEYS={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,CAPSLOCK:20,ESCAPE:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,NUMBER:{0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57},F:{1:112,2:113,3:114,4:115,5:116,6:117,7:118,8:119,9:120,10:121,11:122,12:123},LETTER:{a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90}};var keyHas=[];window.__renderFrames=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/CONST.FRAMES)}}()